<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:jms="http://www.mulesoft.org/schema/mule/jms" xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd
http://www.mulesoft.org/schema/mule/jms http://www.mulesoft.org/schema/mule/jms/current/mule-jms.xsd">
	<error-handler name="intellect-banking-errorhandler" doc:id="60f66e56-4321-4bf9-94b2-f75b52491eae" >
		<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="fcf270dc-49dd-4ef9-8e28-1627174d913e" type="HTTP:BAD_REQUEST">
			<set-variable value="#[400]" doc:name="Set httpStatus Code" doc:id="2d35a867-6609-4ef7-a3fa-f442d766c256" variableName="httpStatus"/>
			<ee:transform doc:name="Transform Message" doc:id="f6bca96b-52bc-4328-9a67-cd328f1ad2a2" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "code": error.errorMessage.typedValue.responseCode,
  "text": error.errorMessage.typedValue.message
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
		</on-error-continue>
		<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="0b77a21d-dbe4-46e6-be4a-1bb08d1fdb12" type="HTTP:INTERNAL_SERVER_ERROR,HTTP:SERVICE_UNAVAILABLE,HTTP:GATEWAY_TIMEOUT,HTTP:BAD_GATEWAY">
			<set-variable value="#[500]" doc:name="Set httpStatus Code" doc:id="d2dd677f-7947-40f4-bf43-abb5ab0a8d90" variableName="httpStatus" />
			<ee:transform doc:name="Transform Message" doc:id="1be30c62-3e00-42a4-8995-094190dd3587">
				<ee:message>
					<ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{
 "code": "BH-606",
 "text": "Internal connectivity error."
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
		</on-error-continue>
		<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="aa7f0218-6539-4d3d-abe7-0a9897127a74" type="HTTP:NOT_FOUND">
			<set-variable value="#[404]" doc:name="httpStatus Code" doc:id="9f0c8772-b711-4493-a6eb-7ff919d97cca" variableName="httpStatus" />
			<ee:transform doc:name="Transform Message" doc:id="d7b2459a-2c46-4af5-9383-2ab3443b43a7" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "code": error.errorMessage.typedValue.responseCode,
  "text": error.errorMessage.typedValue.message
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
		</on-error-continue>
		<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="e2775a04-09db-40d2-a8e6-3d4123e8b277" type="ANY">
			<set-variable value="#[500]" doc:name="Set httpStatus Code" doc:id="7a151484-8fbc-4490-bd53-4f3d4c35cc84" variableName="httpStatus"/>
			<ee:transform doc:name="Transform Message" doc:id="e714ea90-a5ab-4b09-a806-11d4bfe4d4ba" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
 "code": "BH-606",
 "text": "Internal transformation error."
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
		</on-error-continue>		
	</error-handler>
	
	<error-handler name="intellect-banking-errorhandler-500" doc:id="4c5ede82-83fd-4d26-9d2d-928ff1484fea" >
		
		<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="b61148c8-df33-4d6c-bf29-bba122221c6f" type="EXPRESSION,STREAM_MAXIMUM_SIZE_EXCEEDED">
			<set-variable value="#[500]" doc:name="Set httpStatus Code" doc:id="5dd1d622-a04a-41a2-b8db-f22185378c20" variableName="httpStatus"/>
			<ee:transform doc:name="Transform Message" doc:id="adf4c133-fa48-4949-bf48-1b9982178bc0" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
 "response_code": vars.httpStatus,
 "response_message": "Internal transformation error."
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
		</on-error-continue>
		
		<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="dd596a4f-c2fc-4e71-941e-46730fb4a555" type="ANY">
			<set-variable value="#[500]" doc:name="Set httpStatus Code" doc:id="03c609ed-ca1a-4b6a-9819-c73c89a0ff53" variableName="httpStatus"/>
			<ee:transform doc:name="Transform Message" doc:id="56a223f3-e746-4cb0-850b-f9d4e8b1513c" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
 "response_code": vars.httpStatus,
 "response_message": "Internal connectivity error."
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
		</on-error-continue>		
	</error-handler>

	
	
	
</mule>
